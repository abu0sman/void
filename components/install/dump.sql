/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!50503 SET NAMES utf8mb4 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
CREATE TABLE IF NOT EXISTS `m_account_departments` (   `id` int(11) unsigned NOT NULL AUTO_INCREMENT,   `department` char(255) NOT NULL,   `department_long` text NOT NULL,   `department_group_id` smallint(5) unsigned NOT NULL DEFAULT '2',   `inn` char(50) DEFAULT NULL,   `kpp` char(50) DEFAULT NULL,   `address` char(50) DEFAULT NULL,   `rs` char(20) DEFAULT NULL,   `bik` char(50) DEFAULT NULL,   `bank` char(50) DEFAULT NULL,   `ks` char(20) DEFAULT NULL,   `chief_fio_ip` char(255) DEFAULT NULL COMMENT 'ФИО в имминистельном падеже',   `chief_fio_rp` char(255) DEFAULT NULL COMMENT 'ФИО в родительном падеже',   `reason` char(255) DEFAULT NULL COMMENT 'Основание, устав, положение и др.',   `tel` char(50) DEFAULT NULL,   `fax` char(50) DEFAULT NULL,   `email` char(50) DEFAULT NULL,   `status` tinyint(4) unsigned DEFAULT NULL,   PRIMARY KEY (`id`),   KEY `department` (`department`) ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
/*!40000 ALTER TABLE `m_account_departments` DISABLE KEYS */;
INSERT INTO `m_account_departments` (`id`, `department`, `department_long`, `department_group_id`, `inn`, `kpp`, `address`, `rs`, `bik`, `bank`, `ks`, `chief_fio_ip`, `chief_fio_rp`, `reason`, `tel`, `fax`, `email`, `status`) VALUES 	(1, 'Администраторы', '', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL); /*!40000 ALTER TABLE `m_account_departments` ENABLE KEYS */;
CREATE TABLE IF NOT EXISTS `m_account_rights` (   `id` int(11) unsigned NOT NULL AUTO_INCREMENT,   `right_name` char(255) NOT NULL,   `right_index` char(255) NOT NULL,   PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;
/*!40000 ALTER TABLE `m_account_rights` DISABLE KEYS */;
INSERT INTO `m_account_rights` (`id`, `right_name`, `right_index`) VALUES 	(1, 'Максимальные', '1'), 	(2, 'Опытные пользователи', '2'), 	(3, 'Пользователи', '3'), 	(4, 'Только просмотр', '4');
/*!40000 ALTER TABLE `m_account_rights` ENABLE KEYS */;
CREATE TABLE IF NOT EXISTS `m_account_users` (   `id` int(11) unsigned NOT NULL AUTO_INCREMENT,   `login` char(50) DEFAULT NULL,   `password` char(50) DEFAULT NULL,   `soname` tinytext,   `name` tinytext,   `fathername` tinytext,   `rights` char(255) NOT NULL,   `email` tinytext,   `department` int(11) unsigned NOT NULL,   `tel` tinytext,   `status` tinyint(4) unsigned DEFAULT NULL,   PRIMARY KEY (`id`),   UNIQUE KEY `login` (`login`),   KEY `uid` (`id`),   KEY `urights` (`rights`),   KEY `FK_m_account_users_m_account_departments` (`department`),   CONSTRAINT `FK_m_account_users_m_account_departments` FOREIGN KEY (`department`) REFERENCES `m_account_departments` (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
/*!40000 ALTER TABLE `m_account_users` DISABLE KEYS */; INSERT INTO `m_account_users` (`id`, `login`, `password`, `soname`, `name`, `fathername`, `rights`, `email`, `department`, `tel`, `status`) VALUES 	(1, 'Admin', '21232f297a57a5a743894a0e4a801fc3', NULL, NULL, NULL, '1', NULL, 1, NULL, NULL); 
/*!40000 ALTER TABLE `m_account_users` ENABLE KEYS */;
CREATE TABLE IF NOT EXISTS `m_configurations` (   `id` int(11) unsigned NOT NULL AUTO_INCREMENT,   `key` char(255) NOT NULL,   `value` char(255) NOT NULL,   `comment` text NOT NULL,   `placeholder` text NOT NULL,   PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;
/*!40000 ALTER TABLE `m_configurations` DISABLE KEYS */;
INSERT INTO `m_configurations` (`id`, `key`, `value`, `comment`, `placeholder`) VALUES 	(1, 'Сервер БД', '', 'Сервер баз даных', ''), 	(2, 'База данных', '', 'Наименование базы данных', ''), 	(3, 'Пользователь БД', '', 'Пользователь базы данных', ''), 	(4, 'Пароль БД', '', 'Пароль пользователя базы данных', ''), 	(5, 'Путь к директории с программой', 'H:\\', 'Полный путь к содержимому', ''), 	(6, 'Максимальный размер загружаемого файла', '1024', 'Ограничение на загрузку файла в системе. Данный пааметр должен соответствовать параметрам post_max_size и upload_max_filesize в php.ini', '');
/*!40000 ALTER TABLE `m_configurations` ENABLE KEYS */;
CREATE TABLE IF NOT EXISTS `m_event_acc` (   `id` int(11) unsigned NOT NULL AUTO_INCREMENT,   `linked_pod_evolution` int(11) unsigned NOT NULL, `status` int(11) unsigned NOT NULL,   `stage_name` char(50) NOT NULL,   `stage_name_full` text NOT NULL,   PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40000 ALTER TABLE `m_event_acc` DISABLE KEYS */;
/*!40000 ALTER TABLE `m_event_acc` ENABLE KEYS */;
CREATE TABLE IF NOT EXISTS `m_event_attachments_ref` (   `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT 'id',   `linked_event` int(11) unsigned NOT NULL COMMENT 'Связвнный_event',   `apath` tinytext NOT NULL COMMENT 'Путь к tmp файлу',   `aname` tinytext NOT NULL COMMENT 'Оригинальное имя файла',   `atype` int(10) unsigned NOT NULL DEFAULT '1' COMMENT 'Тип вложения',   `edit_date` timestamp NULL DEFAULT NULL COMMENT 'Дата_последенего редактирования',   `create_date` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,   PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40000 ALTER TABLE `m_event_attachments_ref` DISABLE KEYS */;
/*!40000 ALTER TABLE `m_event_attachments_ref` ENABLE KEYS */;
CREATE TABLE IF NOT EXISTS `m_event_comments_ref` (   `id` int(11) unsigned NOT NULL AUTO_INCREMENT,   `linked_event` int(11) NOT NULL,   `cdate` date NOT NULL,   `comment` text NOT NULL,   `comment_status` tinyint(3) unsigned NOT NULL,   PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
/*!40000 ALTER TABLE `m_event_comments_ref` DISABLE KEYS */;
/*!40000 ALTER TABLE `m_event_comments_ref` ENABLE KEYS */;
CREATE TABLE IF NOT EXISTS `m_evolution_acc` (   `id` int(11) unsigned NOT NULL AUTO_INCREMENT,   `linked_order` int(11) unsigned NOT NULL COMMENT 'Связанный ордер',   `linked_evolution_ref` int(11) unsigned NOT NULL DEFAULT '1' COMMENT 'Новыя запись имеет первыую эволюцию',   PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40000 ALTER TABLE `m_evolution_acc` DISABLE KEYS */;
/*!40000 ALTER TABLE `m_evolution_acc` ENABLE KEYS */;
CREATE TABLE IF NOT EXISTS `m_evolution_ref` (   `id` int(11) unsigned NOT NULL AUTO_INCREMENT,   `evolution_name` char(255) NOT NULL,   `linked_pattern` int(11) unsigned NOT NULL,   `next_step` char(50) NOT NULL,   `linked_pod_evolution` int(11) NOT NULL,   PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8;
/*!40000 ALTER TABLE `m_evolution_ref` DISABLE KEYS */;
INSERT INTO `m_evolution_ref` (`id`, `evolution_name`, `linked_pattern`, `next_step`, `linked_pod_evolution`) VALUES 	(1, 'Регистрация задачи', 1, '2,6', 1), 	(2, 'Анализ задачи', 1, '3,4', 2), 	(3, 'Выполнение задачи', 1, '4,5,6', 5), 	(4, 'Проверка задачи', 1, '5,6', 6), 	(5, 'Отметить как выполненную', 1, '6', 7), 	(6, 'Поместить в архив', 1, '88888', 0), 	(7, 'NULL', 2, '', 8);
/*!40000 ALTER TABLE `m_evolution_ref` ENABLE KEYS */;
CREATE TABLE IF NOT EXISTS `m_logs` (   `id` int(11) unsigned NOT NULL AUTO_INCREMENT,   `when` datetime NOT NULL COMMENT 'Когда?',   `who` tinytext NOT NULL COMMENT 'Кто?',   `what` tinytext NOT NULL COMMENT 'Что сделал?',   `where` datetime NOT NULL COMMENT 'Где сделал?',   PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40000 ALTER TABLE `m_logs` DISABLE KEYS */;
/*!40000 ALTER TABLE `m_logs` ENABLE KEYS */;
CREATE TABLE IF NOT EXISTS `m_orders` (   `id` int(11) unsigned NOT NULL AUTO_INCREMENT,   `topic` char(255) NOT NULL,   `Столбец 3` char(255) NOT NULL,   `resolution` text NOT NULL,   `master` int(11) unsigned NOT NULL,   `slave` int(11) unsigned NOT NULL,   `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,   `dead_line` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,   `pattern` int(11) unsigned NOT NULL,   `state` int(11) unsigned NOT NULL DEFAULT '1',   PRIMARY KEY (`id`),   KEY `slave` (`slave`),   CONSTRAINT `slave` FOREIGN KEY (`slave`) REFERENCES `m_account_departments` (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40000 ALTER TABLE `m_orders` DISABLE KEYS */;
/*!40000 ALTER TABLE `m_orders` ENABLE KEYS */;
CREATE TABLE IF NOT EXISTS `m_order_patterns_ref` (   `id` int(11) unsigned NOT NULL AUTO_INCREMENT,   `pattern` char(255) NOT NULL,   PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8; 
/*!40000 ALTER TABLE `m_order_patterns_ref` DISABLE KEYS */;
INSERT INTO `m_order_patterns_ref` (`id`, `pattern`) VALUES 	(1, 'Простая задача'), 	(2, 'Заметка');
/*!40000 ALTER TABLE `m_order_patterns_ref` ENABLE KEYS */;
CREATE TABLE IF NOT EXISTS `m_pod_evolution_acc` (   `id` int(11) unsigned NOT NULL AUTO_INCREMENT,   `linked_evolution` int(11) unsigned NOT NULL,   `linked_pod_evolution_ref` int(11) unsigned NOT NULL,   PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40000 ALTER TABLE `m_pod_evolution_acc` DISABLE KEYS */;
/*!40000 ALTER TABLE `m_pod_evolution_acc` ENABLE KEYS */;
CREATE TABLE IF NOT EXISTS `m_pod_evolution_ref` (   `id` int(11) unsigned NOT NULL AUTO_INCREMENT,   `pod_evolution_name` char(255) NOT NULL,   `next_steps` char(255) NOT NULL,   PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;
/*!40000 ALTER TABLE `m_pod_evolution_ref` DISABLE KEYS */;
INSERT INTO `m_pod_evolution_ref` (`id`, `pod_evolution_name`, `next_steps`) VALUES 	(1, 'Задача зарегистрированна', '2'), 	(2, 'Воспроизведение ошибки', '3'), 	(3, 'Описание', '3,4'), 	(4, 'Предположение', '3,4'), 	(5, 'Начато выполнение', '6'), 	(6, 'Начата проверка заказчиком', '7'), 	(7, 'Выполнена', ''), 	(8, 'NULL', '');
/*!40000 ALTER TABLE `m_pod_evolution_ref` ENABLE KEYS */;
/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IF(@OLD_FOREIGN_KEY_CHECKS IS NULL, 1, @OLD_FOREIGN_KEY_CHECKS) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
